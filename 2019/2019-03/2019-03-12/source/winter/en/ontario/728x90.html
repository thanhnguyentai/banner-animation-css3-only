<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>
			Banner Animation
		</title>
		<link rel="stylesheet" type="text/css" href="728x90.css">
	</head>
	<body onload="startAnimation()">
		<div class="banner-container container">
			<div class="content-container container">
				<div class="content container">
					<div class="content-wrapper container">
						<div class="bg container">&nbsp;</div>
						<div class="stick container">&nbsp;</div>
						<canvas id="snow" width="728" height="90" class="snow container"></canvas>
						<div class="text container">&nbsp;</div>
						<div class="logo container">&nbsp;</div>
						<div class="cta container">&nbsp;</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			//get the cancvas and context and store in vars
			var canvas = document.getElementById("snow");
			var ctx = canvas.getContext("2d");
			var W = ctx.canvas.width
			var H = ctx.canvas.height;

			//generate the snowflakes and apply attributes
			var mf = 455; //max flakes
			var flakes = [];

			//loop throught the empty flakes and apply attributes
			for(var i = 0; i < mf; i++)
			{
				flakes.push({
					  x: Math.random() * (W + 2*W) - 2*W,
					  y: Math.random()*H,
					  r: Math.random()*4+1, //min of 1px and max of 5px
					  d: Math.random() + 1 //density of the flake
				})
			}

			//draw flakes onto canvas
			function drawFlakes(){
				ctx.clearRect(0, 0, W, H);
				ctx.fillStyle = "#fdfdfd";
				ctx.beginPath();
				for(var i = 0; i < mf; i++){
					var f = flakes[i];
					ctx.moveTo(f.x, f.y);
					ctx.arc(f.x, f.y, f.r, 0, Math.PI*2, true);
				}
				ctx.fill();
				moveFlakes();

				window.requestAnimationFrame(drawFlakes);
			}

			//animate the flakes
			var angle = 0;
			function moveFlakes(){
				angle += 0.01;
				for(var i = 0; i < mf; i++){
					//store current flake
					var f = flakes[i];

					//update X and Y coordinates of each snowflakes
					f.y += Math.pow(f.d, 2) + 2;
					f.x += Math.abs(Math.sin(angle)) + 1.5;

					//if the snowflake reaches the bottom, send a new one to the top
					if(f.y > H) {
						flakes[i] = {x: Math.random() * (W + 2*W) - 2*W, y: 0, r: f.r, d: f.d};
					}
				}
			}

			function startAnimation() {
				window.requestAnimationFrame(drawFlakes);
			}
		</script>
	</body>
</html>
