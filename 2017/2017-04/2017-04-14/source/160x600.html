<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>
			Banner Animation
		</title>
		<link rel="stylesheet" type="text/css" href="160x600.css">
	</head>
	<body>
		<div class="banner-container container">
			<div class="content-container container">
				<div class="content container">
					<div class="content-wrapper container">
						<div class="background container">&nbsp;</div>
						<div class="content-hide-ie container">
							<div class="green-chameleon absolute">&nbsp;</div>
							<svg class="chameleon-mask absolute" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="160px" height="410px" viewBox="0 0 160 410" enable-background="new 0 0 160 410" xml:space="preserve">
								<defs>  
									<linearGradient id="gradient">  
										<stop offset="0" stop-color="white" stop-opacity="0" />  
										<stop offset=".2" stop-color="white" stop-opacity=".9" />  
										<stop offset="1" stop-color="white" stop-opacity="1" />  
									</linearGradient>

									<mask id="gradient-mask">  
										<rect id="mask-rect" x="320" y="0" width="160" height="410" fill="url(#gradient)"  />  
									</mask>  
								</defs>

								<g mask="url(#gradient-mask)">
					                <image overflow="visible" width="160" height="410" xlink:href="./images/160x600_chameleon_purple.jpg"> </image>
								</g>			
							</svg>
						</div>
						<div class="purple-chameleon-static absolute">&nbsp;</div>
						<div class="leaves absolute">&nbsp;</div>
						<div class="logo absolute">&nbsp;</div>
						<div class="text absolute">&nbsp;</div>
						<div class="cta absolute">&nbsp;</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			var request = window.requestAnimationFrame || 
						window.mozRequestAnimationFrame || 
						window.webkitRequestAnimationFrame || 
						function(cb) {
			    return setTimeout(cb, 1000/60)
			};

			function initSVGAnimation(element, initialProperty, endProperty, duration) {
				duration = duration * 1000;
				var timeout = 1000/60;
				var numberCount = parseInt(duration / timeout);
				var intervalUpdate = (endProperty.value - initialProperty.value)/numberCount;

				var updateProperty = function() {
					initialProperty.value += intervalUpdate;
					
					if((intervalUpdate > 0 && initialProperty.value >= endProperty.value) || 
						(intervalUpdate < 0 && initialProperty.value <= endProperty.value)) {
						initialProperty.value = endProperty.value;
						element.setAttribute(initialProperty.property, initialProperty.value);
					} else {
						element.setAttribute(initialProperty.property, initialProperty.value);
						request(updateProperty);
					}
				}

				updateProperty();
			}

			setTimeout(function() {
				initSVGAnimation(document.getElementById("mask-rect"), { property: "x", value: 320 }, { value: 0 }, 2);
			}, 3750);
		</script>
	</body>
</html>
